<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dua AI Companion</title>
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <style>
        body {
            background: linear-gradient(135deg, #f6d365 0%, #fda085 100%);
            min-height: 100vh;
            font-family: 'Arial', sans-serif;
        }
        .glass-morphism {
            background: rgba(255, 255, 255, 0.2);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            border: 1px solid rgba(255, 255, 255, 0.125);
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">
    <div class="w-full max-w-md glass-morphism p-6 rounded-xl shadow-2xl">
        <h1 class="text-2xl font-bold text-center text-white mb-6">Dua AI Companion</h1>
        
        <div class="mb-4">
            <input 
                type="text" 
                id="userInput" 
                placeholder="Describe your situation or need" 
                class="w-full p-3 rounded-lg bg-white bg-opacity-20 text-white placeholder-white focus:outline-none focus:ring-2 focus:ring-white"
            >
        </div>
        
        <div class="grid grid-cols-2 gap-4 mb-4">
            <button 
                id="recommendBtn" 
                class="bg-white bg-opacity-30 text-white py-3 rounded-lg hover:bg-opacity-40 transition"
            >
                Recommend Dua
            </button>
            <button 
                id="randomDuaBtn" 
                class="bg-white bg-opacity-30 text-white py-3 rounded-lg hover:bg-opacity-40 transition"
            >
                Random Dua
            </button>
        </div>
        
        <div 
            id="duaResult" 
            class="text-white text-center p-4 rounded-lg bg-white bg-opacity-10"
        >
            Your dua will appear here
        </div>
    </div>

    <script type="module">
        // Configuration - Replace with your actual API keys
        const GEMINI_API_KEY = 'YOUR_GEMINI_API_KEY';
        const DUAS_API_ENDPOINT = 'https://duas-api-endpoint.com/duas';

        // Fetch duas from an API
        async function fetchDuas() {
            try {
                const response = await fetch(DUAS_API_ENDPOINT);
                if (!response.ok) {
                    throw new Error('Failed to fetch duas');
                }
                return await response.json();
            } catch (error) {
                console.error('Error fetching duas:', error);
                return [];
            }
        }

        // AI-powered dua recommendation using Gemini
        async function getAIDua(input) {
            try {
                const response = await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-pro:generateContent?key=${AIzaSyCHMj_UZZZ5q4L-U-Xjp_dwhLyZpY1rvKw}`, {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },
                    body: JSON.stringify({
                        contents: [{
                            parts: [{
                                text: `Recommend a specific Islamic dua for the following situation: ${input}. 
                                The dua should be concise, meaningful, and provide spiritual comfort or guidance.`
                            }]
                        }]
                    })
                });

                if (!response.ok) {
                    throw new Error('Gemini API request failed');
                }

                const data = await response.json();
                return data.candidates[0].content.parts[0].text.trim();
            } catch (error) {
                console.error('Error generating AI dua:', error);
                return "May Allah guide and protect you in your time of need.";
            }
        }

        // Recommend Dua Button Handler
        document.getElementById('recommendBtn').addEventListener('click', async () => {
            const userInput = document.getElementById('userInput').value;
            
            if (!userInput) {
                Swal.fire({
                    icon: 'warning',
                    title: 'Oops...',
                    text: 'Please describe your situation!'
                });
                return;
            }

            try {
                const recommendedDua = await getAIDua(userInput);
                document.getElementById('duaResult').textContent = recommendedDua;
                
                Swal.fire({
                    icon: 'success',
                    title: 'Dua Recommendation',
                    text: 'A personalized dua has been recommended!'
                });
            } catch (error) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Could not generate dua recommendation'
                });
            }
        });

        // Random Dua Button Handler
        document.getElementById('randomDuaBtn').addEventListener('click', async () => {
            try {
                const duas = await fetchDuas();
                
                if (duas.length === 0) {
                    throw new Error('No duas available');
                }

                const randomDua = duas[Math.floor(Math.random() * duas.length)];
                
                document.getElementById('duaResult').textContent = randomDua.text || randomDua;
                
                Swal.fire({
                    icon: 'info',
                    title: 'Random Dua',
                    text: 'Here\'s a random spiritual inspiration!'
                });
            } catch (error) {
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Could not fetch random dua'
                });
            }
        });
    </script>
</body>
</html>
