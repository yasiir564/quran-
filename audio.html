<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tracks</title>
    <link rel="stylesheet" href="styles.css"> <!-- Assuming there's a styles.css for basic styling -->
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/js/all.min.js"></script>
    <style>
        /* Existing styles... */
        /* Add your existing CSS here */

        /* New styles */
        header {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 10px;
        }

        .search-bar {
            width: 100%;
            max-width: 600px;
            margin-bottom: 20px;
            padding: 10px;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .show-more-btn {
            display: block;
            width: 200px;
            margin: 20px auto;
            padding: 10px;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: #fff;
            font-size: 1.2em;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        .show-more-btn:hover {
            background-color: #0056b3;
        }

        .featured-reciters {
            display: flex;
            overflow-x: auto;
            padding: 10px 0;
            gap: 10px;
        }

        .reciter-card {
            background-color: #fff;
            padding: 15px;
            border: 1px solid #ddd;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            border-radius: 5px;
            min-width: 200px;
            text-align: center;
            transition: transform 0.2s;
        }

        .reciter-card img {
            border-radius: 50%;
            width: 100px;
            height: 100px;
            object-fit: cover;
        }

        .reciter-card:hover {
            transform: scale(1.05);
        }

        .arrow {
            font-size: 2em;
            cursor: pointer;
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            height: 40px;
            background: rgba(255, 255, 255, 0.7);
            border-radius: 50%;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>Tracks</h1>
            <input type="text" class="search-bar" id="search-bar" placeholder="Search Surahs...">
            <i id="dark-mode-toggle" class="fas fa-moon dark-mode-toggle"></i>
            <span class="close-button" onclick="window.location.href='index.html'">Ã—</span>
        </header>

        <!-- Featured Reciters -->
        <div class="featured-reciters">
            <div class="arrow" id="prev-arrow"><i class="fas fa-chevron-left"></i></div>
            <div class="reciter-card">
                <img src="reciter1.jpg" alt="Reciter 1">
                <h3>Reciter 1</h3>
            </div>
            <div class="reciter-card">
                <img src="reciter2.jpg" alt="Reciter 2">
                <h3>Reciter 2</h3>
            </div>
            <div class="reciter-card">
                <img src="reciter3.jpg" alt="Reciter 3">
                <h3>Reciter 3</h3>
            </div>
            <div class="reciter-card">
                <img src="reciter4.jpg" alt="Reciter 4">
                <h3>Reciter 4</h3>
            </div>
            <div class="reciter-card">
                <img src="reciter5.jpg" alt="Reciter 5">
                <h3>Reciter 5</h3>
            </div>
            <div class="reciter-card">
                <img src="reciter6.jpg" alt="Reciter 6">
                <h3>Reciter 6</h3>
            </div>
            <div class="arrow" id="next-arrow"><i class="fas fa-chevron-right"></i></div>
        </div>

        <div id="surah-list"></div>
        <button class="show-more-btn" id="show-more-btn">Show More</button>
        <div class="loader" id="loader"></div>
    </div>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const surahList = document.getElementById('surah-list');
        const loader = document.getElementById('loader');
        const darkModeToggle = document.getElementById('dark-mode-toggle');
        const searchBar = document.getElementById('search-bar');
        const showMoreBtn = document.getElementById('show-more-btn');
        const featuredReciters = document.querySelector('.featured-reciters');
        const prevArrow = document.getElementById('prev-arrow');
        const nextArrow = document.getElementById('next-arrow');
        let surahs = [];
        let surahDisplayCount = 30;

        loader.style.display = 'block';

        fetch('https://api.quran.com/api/v4/chapters')
            .then(response => response.json())
            .then(data => {
                loader.style.display = 'none';
                surahs = data.chapters;
                displaySurahs(surahs.slice(0, surahDisplayCount));
            })
            .catch(error => {
                loader.style.display = 'none';
                console.error('Error fetching Surahs:', error);
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Unable to fetch Surah list. Please try again later.',
                });
            });

        function displaySurahs(surahsToDisplay) {
            surahList.innerHTML = '';
            const fragment = document.createDocumentFragment();
            surahsToDisplay.forEach(surah => {
                const surahDiv = document.createElement('div');
                surahDiv.classList.add('surah');

                const surahInfo = document.createElement('div');
                surahInfo.classList.add('surah-info');
                surahInfo.innerHTML = `<strong>${surah.name_simple}</strong> <br> ${surah.name_arabic} <br> <span>${surah.id}</span>`;
                surahDiv.appendChild(surahInfo);

                surahDiv.addEventListener('click', () => {
                    window.location.href = `audioSurah.html?surah=${surah.id}`;
                });

                fragment.appendChild(surahDiv);
            });
            surahList.appendChild(fragment);
        }

        showMoreBtn.addEventListener('click', () => {
            surahDisplayCount += 30;
            displaySurahs(surahs.slice(0, surahDisplayCount));
        });

        searchBar.addEventListener('input', (event) => {
            const query = event.target.value.toLowerCase();
            const filteredSurahs = surahs.filter(surah =>
                surah.name_simple.toLowerCase().includes(query) ||
                surah.name_arabic.toLowerCase().includes(query)
            );
            displaySurahs(filteredSurahs.slice(0, surahDisplayCount));
        });

        darkModeToggle.addEventListener('click', () => {
            const darkModeEnabled = document.body.classList.toggle('dark-mode');
            darkModeToggle.classList.toggle('fa-moon', !darkModeEnabled);
            darkModeToggle.classList.toggle('fa-sun', darkModeEnabled);
            localStorage.setItem('darkMode', darkModeEnabled ? 'enabled' : 'disabled');
        });

        if (localStorage.getItem('darkMode') === 'enabled') {
            document.body.classList.add('dark-mode');
            darkModeToggle.classList.remove('fa-moon');
            darkModeToggle.classList.add('fa-sun');
        }

        // Featured Reciters Scrolling
        let scrollAmount = 0;
        const scrollAmountIncrement = 200;

        nextArrow.addEventListener('click', () => {
            if (scrollAmount < featuredReciters.scrollWidth - featuredReciters.clientWidth) {
                scrollAmount += scrollAmountIncrement;
                featuredReciters.scrollTo({
                    left: scrollAmount,
                    behavior: 'smooth'
                });
            }
        });

        prevArrow.addEventListener('click', () => {
            if (scrollAmount > 0) {
                scrollAmount -= scrollAmountIncrement;
                featuredReciters.scrollTo({
                    left: scrollAmount,
                    behavior: 'smooth'
                });
            }
        });
    });
    </script>
</body>
</html>
